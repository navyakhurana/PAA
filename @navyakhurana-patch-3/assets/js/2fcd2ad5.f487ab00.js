"use strict";(self.webpackChunkpaa_doc=self.webpackChunkpaa_doc||[]).push([[8808],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>h});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},m=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),u=p(a),d=o,h=u["".concat(l,".").concat(d)]||u[d]||c[d]||r;return a?n.createElement(h,i(i({ref:t},m),{},{components:a})):n.createElement(h,i({ref:t},m))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:o,i[1]=s;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},45783:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var n=a(87462),o=(a(67294),a(3905));const r={sidebar_position:5},i="Deploy the SaaS application",s={unversionedId:"project-panel/basic/deploy-saas-application/README",id:"project-panel/basic/deploy-saas-application/README",title:"Deploy the SaaS application",description:"Before you deploy the sample application to your SAP BTP Kyma runtime, please make sure you completed the previous tutorial chapters. Your Docker Images have to be available in your Container Registry, so Helm can access and pull them during the upcoming deployment.",source:"@site/docs/project-panel/2-basic/4-deploy-saas-application/README.md",sourceDirName:"project-panel/2-basic/4-deploy-saas-application",slug:"/project-panel/basic/deploy-saas-application/",permalink:"/PAA/@navyakhurana-patch-3/project-panel/basic/deploy-saas-application/",draft:!1,tags:[],version:"current",lastUpdatedBy:"Navya Khurana",lastUpdatedAt:1739955971,formattedLastUpdatedAt:"Feb 19, 2025",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Build, Pack and Push your Docker Images",permalink:"/PAA/@navyakhurana-patch-3/project-panel/basic/build-your-docker-images/"},next:{title:"Subscribe a Tenant Subaccount",permalink:"/PAA/@navyakhurana-patch-3/project-panel/basic/subscribe-consumer-subaccount/"}},l={},p=[{value:"1. Introduction",id:"1-introduction",level:2},{value:"2. Create a new Kyma namespace",id:"2-create-a-new-kyma-namespace",level:2},{value:"3. Prepare the Helm deployment",id:"3-prepare-the-helm-deployment",level:2},{value:"4. Deploy to your Kyma Cluster",id:"4-deploy-to-your-kyma-cluster",level:2},{value:"5. Multiple Deployments",id:"5-multiple-deployments",level:2}],m={toc:p},u="wrapper";function c(e){let{components:t,...r}=e;return(0,o.kt)(u,(0,n.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"deploy-the-saas-application"},"Deploy the SaaS application"),(0,o.kt)("p",null,"Before you deploy the sample application to your SAP BTP Kyma runtime, please make sure you completed the previous tutorial chapters. Your Docker Images have to be available in your Container Registry, so Helm can access and pull them during the upcoming deployment. "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#deploy-the-saas-application"},"Deploy the SaaS application"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#1-introduction"},"1. Introduction")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#2-create-a-new-kyma-namespace"},"2. Create a new Kyma namespace")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#3-prepare-the-helm-deployment"},"3. Prepare the Helm deployment")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#4-deploy-to-your-kyma-cluster"},"4. Deploy to your Kyma Cluster")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#5-multiple-deployments"},"5. Multiple Deployments"))))),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Important")," "),(0,o.kt)("p",{parentName:"admonition"},"The sample application can be deployed multiple times if either the ",(0,o.kt)("strong",{parentName:"p"},"Release Name"),", the ",(0,o.kt)("strong",{parentName:"p"},"Kyma Namespace")," or the ",(0,o.kt)("strong",{parentName:"p"},"Kyma Cluster")," are different. In the latter case, the cluster has to be in a different SAP BTP Subaccount (due to conflicting Role Collection names). ")),(0,o.kt)("p",null,"If you are facing any issues during the following steps of our tutorial, please feel free to consult the excellent ",(0,o.kt)("strong",{parentName:"p"},"Developer Tutorial")," on ",(0,o.kt)("strong",{parentName:"p"},"Deploy Your CAP Application on SAP BTP Kyma Runtime"),". It describes similar steps and will get you covered in great detail, in case you get stuck in our sample scenario."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developers.sap.com/mission.btp-deploy-cap-kyma.html"},"https://developers.sap.com/mission.btp-deploy-cap-kyma.html")),(0,o.kt)("h2",{id:"1-introduction"},"1. Introduction"),(0,o.kt)("p",null,"The deployment of the Sustainable Saas solution to your SAP BTP Kyma Cluster is handled by ",(0,o.kt)("a",{parentName:"p",href:"https://helm.sh/"},"Helm"),". To learn more about the basic concepts of Helm, visit the respective chapter of the tutorial (",(0,o.kt)("a",{parentName:"p",href:"/PAA/@navyakhurana-patch-3/project-panel/basic/kyma-resources-helm/"},"click here"),"). Repeating myself, I also suggest to read and inhale the brilliant blog post of Maximilian Streifeneder on the topics of Kyma, Helm, Paketo and a lot more! It will give you a great overview and introduction if you are new to the Kubernetes, Docker and Kyma world!"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://blogs.sap.com/2023/03/07/surviving-and-thriving-with-the-sap-cloud-application-programming-model-deployment-to-sap-btp-kyma-runtime/"},"https://blogs.sap.com/2023/03/07/surviving-and-thriving-with-the-sap-cloud-application-programming-model-deployment-to-sap-btp-kyma-runtime/")),(0,o.kt)("p",null,"Furthermore, if you are facing any issues during the following steps of our tutorial, please feel free to consult the excellent ",(0,o.kt)("strong",{parentName:"p"},"Developer Tutorial")," on ",(0,o.kt)("strong",{parentName:"p"},"Deploy Your CAP Application on SAP BTP Kyma Runtime"),". It describes similar steps and will get you covered in great detail, in case you get stuck in our sample scenario."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developers.sap.com/mission.btp-deploy-cap-kyma.html"},"https://developers.sap.com/mission.btp-deploy-cap-kyma.html")),(0,o.kt)("p",null,"Before you proceed with the following steps, please make sure you have successfully built your Docker Images and pushed them to the Container Registry of your choice (e.g., Docker Hub or GitHub). Helm will not make use of your local Docker Images, but will pull the latest Images from the provided registry and deploy them to your Kyma Cluster. "),(0,o.kt)("p",null,"The following Docker Images should be available in your Container Registry:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"susaas-srv - Backend CAP Service"),(0,o.kt)("li",{parentName:"ul"},"susaas-api - API CAP Service"),(0,o.kt)("li",{parentName:"ul"},"susaas-broker - API Service Broker"),(0,o.kt)("li",{parentName:"ul"},"susaas-router - Application Router"),(0,o.kt)("li",{parentName:"ul"},"susaas-db-com - Shared Database Deployer"),(0,o.kt)("li",{parentName:"ul"},"susaas-html5-deployer - HTML5 Apps Deployer")),(0,o.kt)("p",null,"Here a sample screenshot taken from Docker Hub. "),(0,o.kt)("p",null," ",(0,o.kt)("img",{alt:"&lt;img src=&quot;./images/ImageOverview.png&quot; width=&quot;400&quot;/&gt;",src:a(81690).Z,width:"1287",height:"725"})),(0,o.kt)("p",null,"During Deployment, Helm will generate the required Kubernetes resources (manifest files) based on the provided Helm templates (again - feel free to check out our ",(0,o.kt)("a",{parentName:"p",href:"/PAA/@navyakhurana-patch-3/project-panel/basic/kyma-resources-helm/"},"Helm Introduction"),") and deploy them to your Kyma Cluster. This will result in various different objects like ",(0,o.kt)("strong",{parentName:"p"},"Deployments"),", ",(0,o.kt)("strong",{parentName:"p"},"Jobs")," or ",(0,o.kt)("strong",{parentName:"p"},"SAP BTP Service Instances")," or ",(0,o.kt)("strong",{parentName:"p"},"Bindings"),". "),(0,o.kt)("p",null,":::hint ",(0,o.kt)("strong",{parentName:"p"},"Hint"),"\nTo learn more about all the various Kyma and native Kubernetes resources utilized by our sample application, please check out the respective deep-dive chapters (",(0,o.kt)("a",{parentName:"p",href:"/PAA/@navyakhurana-patch-3/project-panel/basic/kyma-resources-helm/"},"click here"),")!\n:::"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Kubernetes Deployments")),(0,o.kt)("p",null," ",(0,o.kt)("img",{alt:"&lt;img src=&quot;./images/Deployments.png&quot; width=&quot;400&quot;/&gt;",src:a(36672).Z,width:"1347",height:"636"})),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"susaas-srv"),(0,o.kt)("li",{parentName:"ul"},"susaas-api "),(0,o.kt)("li",{parentName:"ul"},"susaas-broker"),(0,o.kt)("li",{parentName:"ul"},"susaas-router ")),(0,o.kt)("p",null,"These workloads are constantly running in your Cluster after deployment, as they need to be contiguously reachable for external traffic. They come with further components like API Rules or Istio related configurations, which are explained in further detail as part of our dedicated Kyma tutorial (",(0,o.kt)("a",{parentName:"p",href:"/PAA/@navyakhurana-patch-3/project-panel/basic/kyma-resources-helm/"},"click here"),"). "),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Kubernetes Jobs")),(0,o.kt)("p",null," ",(0,o.kt)("img",{alt:"&lt;img src=&quot;./images/JobsOverview.png&quot; width=&quot;400&quot;/&gt;",src:a(80011).Z,width:"1577",height:"870"})),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"susaas-hana-deployer"),(0,o.kt)("li",{parentName:"ul"},"susaas-html5-apps-deployer")),(0,o.kt)("p",null,"The deployment of the shared data model using the Node.js based HDI Deployer is only required upon initial setup or when any changes are applied to the data model. The same applies for the static UI5 modules. This is why, both applications components are running as Jobs whenever a ",(0,o.kt)("em",{parentName:"p"},"helm install")," or ",(0,o.kt)("em",{parentName:"p"},"helm upgrade")," is initiated. After the Jobs finished successfully, they are deleted from the Cluster again. "),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"SAP BTP Service Instances/Bindings")),(0,o.kt)("p",null,"The Helm deployment will create a list of SAP BTP Service Instances and corresponding Service Bindings required by your workloads. While these Service Instances can also be seen from within the SAP BTP Cockpit, the Service Credentials can only be retrieved and accessed from your Kyma Dashboard."),(0,o.kt)("p",null," ",(0,o.kt)("img",{alt:"&lt;img src=&quot;./images/ServiceInstancesKyma.png&quot; width=&quot;400&quot;/&gt;",src:a(57272).Z,width:"1655",height:"709"}),"\n",(0,o.kt)("img",{alt:"&lt;img src=&quot;./images/ServiceInstancesCf.png&quot; width=&quot;360&quot;/&gt;",src:a(17885).Z,width:"1653",height:"788"})),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"SAP BTP Service Bindings will create corresponding Kyma Secrets, which are consumed by your Kubernetes workloads (Pods, Jobs) and allow your applications to communicate with the respective SAP BTP Service Instances like you know it from the Cloud Foundry context. Npm packages like @sap/xsenv (",(0,o.kt)("a",{parentName:"p",href:"https://blogs.sap.com/2022/07/12/the-new-way-to-consume-service-bindings-on-kyma-runtime/"},"see here"),") natively support these kind of Service Bindings in Kyma and Cloud Foundry. Check out Max Streifeneder's blog post (",(0,o.kt)("a",{parentName:"p",href:"https://blogs.sap.com/2023/03/07/surviving-and-thriving-with-the-sap-cloud-application-programming-model-deployment-to-sap-btp-kyma-runtime/"},"click here"),'), who also provides a great summary of this concept (just search for "How does CAP know where to get the service binding information from?"). ')),(0,o.kt)("h2",{id:"2-create-a-new-kyma-namespace"},"2. Create a new Kyma namespace"),(0,o.kt)("p",null,"Using Helm, you can deploy the SaaS sample application to either the ",(0,o.kt)("em",{parentName:"p"},"default")," Kyma namespace or create a new namespace of your choice for this sample application. In the following, you will learn how to create a new namespace called ",(0,o.kt)("em",{parentName:"p"},"susaas")," in Kyma. "),(0,o.kt)("p",null,"2.1. First of all, please install the ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tasks/tools/#kubectl"},(0,o.kt)("strong",{parentName:"a"},"kubectl"))," command line tool to your local device. Kubectl allows you to interact with your Kyma Cluster from your command line, as you are used to from any other Kubernetes environment. ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tasks/tools/#kubectl"},"Click here")," to find further information about ",(0,o.kt)("strong",{parentName:"p"},"kubectl"),". Helm will make use of ",(0,o.kt)("strong",{parentName:"p"},"kubectl")," during the deployment process to create the required resources in your Cluster. "),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Installation Shortcuts"),"\n",(0,o.kt)("strong",{parentName:"p"},"MacOS")," - brew install kubectl\n",(0,o.kt)("strong",{parentName:"p"},"Windows")," - choco install kubernetes-cli")),(0,o.kt)("p",null,"To learn more about ",(0,o.kt)("strong",{parentName:"p"},"kubectl")," commands check the ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands"},"official documentation")," and the ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/kubectl/cheatsheet/"},"kubectl cheat sheet"),". Learning how to use ",(0,o.kt)("strong",{parentName:"p"},"kubectl")," is one of the most essential requirements when starting off with Kubernetes and Kyma. The command syntax is quite simple to understand and follows a consistent pattern. So don't shy to have a little deep-dive into the provided documentations. It pays! "),(0,o.kt)("p",null,"2.2. Before you continue with the next step, make sure you can successfully execute the following command. This proves that kubectl has been successfully added to your Environment Variables. In case of errors, please try again from a new command line instance and make sure you followed all steps in the installation instructions provided.  "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'> kubectl version\n\nClient Version: version.Info{Major:"1", Minor:"26", ...\n')),(0,o.kt)("p",null,"2.3. To connect to your Kyma Cluster, you have to install another tool called ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/int128/kubelogin#setup"},(0,o.kt)("strong",{parentName:"a"},"kubelogin")),". Please use the below shortcuts or the installation details in the linked documentation to proceed. "),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Installation Shortcuts"),"\n",(0,o.kt)("strong",{parentName:"p"},"MacOS")," - brew install int128/kubelogin/kubelogin\n",(0,o.kt)("strong",{parentName:"p"},"Windows")," - choco install kubelogin")),(0,o.kt)("p",null,"Check the successful installation by running the following command."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"> kubelogin\n\nkubelogin version v1.26.0 \n")),(0,o.kt)("p",null,"2.4. Download the so-called ",(0,o.kt)("strong",{parentName:"p"},"kubeconfig")," file associated to your Kyma Cluster from your SAP BTP Cockpit. You can find it in your SAP BTP subaccount ",(0,o.kt)("strong",{parentName:"p"},"Overview")," section. This file contains all the required access details and credentials so that ",(0,o.kt)("strong",{parentName:"p"},"kubectl")," can connect to your Kyma Cluster. "),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Important")," "),(0,o.kt)("p",{parentName:"admonition"},"Do not share this file with anyone else and do not commit it to your GitHub repository.")),(0,o.kt)("p",null," ",(0,o.kt)("img",{alt:"&lt;img src=&quot;./images/Kubeconfig.png&quot; width=&quot;400&quot;/&gt;",src:a(74735).Z,width:"1463",height:"934"})),(0,o.kt)("p",null,"2.5. Once you downloaded the ",(0,o.kt)("em",{parentName:"p"},"kubeconfig.yaml")," file, please store it as a file named ",(0,o.kt)("strong",{parentName:"p"},"config")," (! without any file name extension !) in your hidden ",(0,o.kt)("em",{parentName:"p"},"$HOME/.kube")," directory. Kubectl will check this ",(0,o.kt)("strong",{parentName:"p"},"hidden")," directory for an available configuration file named ",(0,o.kt)("strong",{parentName:"p"},"config"),". This is probably the most convenient way to provide your Cluster access details to kubectl. "),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"In Windows, the directory is e.g., C:\\Users","\\","<Username",">","\\",".kube")),(0,o.kt)("p",null,"Alternatively, you can also configure the location of your configuration file in the environment variable ",(0,o.kt)("strong",{parentName:"p"},"KUBECONFIG")," or by adding the kubectl parameter ",(0,o.kt)("em",{parentName:"p"},"--kubeconfig")," to any kubectl command (which is obviously a bit cumbersome). "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"EXPORT KUBECONFIG=/sample/path/config\n\nkubectl get pods --kubeconfig=/sample/path/config\n")),(0,o.kt)("p",null,"If you are facing issues in this step of the tutorial, feel free to consult the excellent ",(0,o.kt)("strong",{parentName:"p"},"Developer Tutorial")," on ",(0,o.kt)("strong",{parentName:"p"},"Deploy Your CAP Application on SAP BTP Kyma Runtime"),", which describes this step in further detail!"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developers.sap.com/tutorials/btp-app-kyma-prepare-dev-environment.html"},"https://developers.sap.com/tutorials/btp-app-kyma-prepare-dev-environment.html")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"If you have to manage multiple Kyma or Kubernetes Clusters, make sure to research the ",(0,o.kt)("strong",{parentName:"p"},"kubectx")," command line tool (",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ahmetb/kubectx"},"https://github.com/ahmetb/kubectx"),")! It provides you a very convenient way to switch the context between various clusters. ")),(0,o.kt)("p",null,"2.6. Run the following command to check whether kubectl can successfully connect to your cluster using the respective config file.  "),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"Depending on your landscape, you will need to setup Two-Factor-Authentication using e.g., the SAP Authenticator App. ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"> kubectl cluster-info\n\nKubernetes control plane is running at https://api.a1b2c3d4.kyma.ondemand.com\n")),(0,o.kt)("p",null,"2.7. The following command, finally allows you to create a new namespace in your Kyma cluster. To learn more about ",(0,o.kt)("strong",{parentName:"p"},"kubectl")," commands check the ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands"},"official documentation")," and the ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/kubectl/cheatsheet/"},"kubectl cheat sheet"),". "),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"This is just a sample for your reference. If you want, you can deploy the sample application also to the Kyma ",(0,o.kt)("em",{parentName:"p"},"default")," namespace or any other namespace of your choice!")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"> kubectl create namespace susaas\n\nnamespace/susaas created\n")),(0,o.kt)("p",null,"2.8. Use the following command, to enable the ",(0,o.kt)("strong",{parentName:"p"},"Istio")," Sidecar Injection for your new namespace. ",(0,o.kt)("strong",{parentName:"p"},"Istio")," is one of the most popular ",(0,o.kt)("strong",{parentName:"p"},"Service Mesh")," offerings for Kubernetes and manages Cluster-internal communication as well as external access to your workloads! We highly recommend to learn more about ",(0,o.kt)("a",{parentName:"p",href:"/PAA/@navyakhurana-patch-3/project-panel/basic/kyma-resources-helm/"},(0,o.kt)("strong",{parentName:"a"},"Istio Service Mesh")),", by visiting the respective part of the tutorial. The features and possibilities are mind-blowing compared to what you can do in a Cloud Foundry scenario! "),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Important")," "),(0,o.kt)("p",{parentName:"admonition"},"If you plan to use an existing namespace, make sure this label is configured and if necessary, please update the namespace using ",(0,o.kt)("strong",{parentName:"p"},"kubectl")," or the Kyma Dashboard! ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"kubectl label namespace susaas istio-injection=enabled\n")),(0,o.kt)("p",null,"You can either use ",(0,o.kt)("strong",{parentName:"p"},"kubectl")," or check in you Kyma Dashboard, whether the label has been successfully set!"),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"Here you can see another kubectl command called ",(0,o.kt)("strong",{parentName:"p"},"describe"),", giving you more information (than a pure ",(0,o.kt)("strong",{parentName:"p"},"get"),") about a certain object like in this case our namespace. ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"> kubectl describe namespace susaas \n\nName:         susaas\nLabels:       istio-injection=enabled\n              kubernetes.io/metadata.name=susaas\n")),(0,o.kt)("p",null," ",(0,o.kt)("img",{alt:"&lt;img src=&quot;./images/IstioInjectionLabel.png&quot; width=&quot;400&quot;/&gt;",src:a(13480).Z,width:"828",height:"290"})),(0,o.kt)("p",null,"2.9. To delete a namespace, just execute the following ",(0,o.kt)("strong",{parentName:"p"},"kubectl")," command. Already getting an idea about how the kubectl commands are structured? Great! "),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Important")," "),(0,o.kt)("p",{parentName:"admonition"},"Be ",(0,o.kt)("strong",{parentName:"p"},"extremely cautious")," when deleting a namespace containing a ",(0,o.kt)("strong",{parentName:"p"},"SaaS application")," with ",(0,o.kt)("strong",{parentName:"p"},"active subscribers"),". This can result in very cumbersome situations, where SAP BTP Service Instances like XSUAA can only be deleted with complex additional effort. Before you ",(0,o.kt)("strong",{parentName:"p"},"delete a namespace")," or ",(0,o.kt)("strong",{parentName:"p"},"uninstall a Helm Release"),", always make sure there are no more active subscribers! ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"> kubectl delete namespace susaas\n\nnamespace/susaas deleted\n")),(0,o.kt)("p",null,"Okay great, by now you should be equipped with either a new namespace or the default Kyma namespace. So let us prepare the SaaS sample application for deployment next. "),(0,o.kt)("h2",{id:"3-prepare-the-helm-deployment"},"3. Prepare the Helm deployment"),(0,o.kt)("p",null,"Let's get started with the preparation of our ",(0,o.kt)("strong",{parentName:"p"},"Helm deployment")," or ",(0,o.kt)("strong",{parentName:"p"},"Helm installation"),". Based on your own Kyma environment, you will need to update the ",(0,o.kt)("em",{parentName:"p"},"values.yaml")," file of your ",(0,o.kt)("strong",{parentName:"p"},"Umbrella Chart"),". This is a regular process step, which you need to undertake as part of almost any Helm installation to inject environment-specific details which cannot be pre-configured by the application/package vendor. "),(0,o.kt)("p",null,"3.1. Open the Umbrella Chart ",(0,o.kt)("em",{parentName:"p"},"values.yaml")," file (of our SaaS sample application) in the ",(0,o.kt)("em",{parentName:"p"},"code/charts/sustainable-saas")," directory (",(0,o.kt)("a",{parentName:"p",href:"../../../code/charts/sustainable-saas/values.yaml"},"click here"),"). "),(0,o.kt)("p",null,"3.2. Provide values for the following parameters, based on your own environment and the Container Registry used. "),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"global")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"imagePullSecret - Name of a Image Pull Secret if required."),(0,o.kt)("admonition",{parentName:"li",type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"This value needs to contain the reference to a potential Image Pull Secret of your Container Registry. If you're using a free Docker Hub account and public Docker Images, this property can be left unchanged. This is probably the easiest approach if you are new to Docker and Kubernetes. Otherwise, please make sure to create a Kyma ",(0,o.kt)("strong",{parentName:"p"},"Secret")," containing your imagePullSecret and provide the reference to your Secret here. "),(0,o.kt)("blockquote",{parentName:"admonition"},(0,o.kt)("p",{parentName:"blockquote"},"Find more details in the following blog post (",(0,o.kt)("a",{parentName:"p",href:"https://blogs.sap.com/2022/12/04/sap-btp-kyma-kubernetes-how-to-pull-from-private-repository/"},"click here"),") or check out the ",(0,o.kt)("strong",{parentName:"p"},"Deploy Your CAP Application on SAP BTP Kyma Runtime")," tutorial in the SAP Tutorial Navigator(",(0,o.kt)("a",{parentName:"p",href:"https://developers.sap.com/tutorials/btp-app-kyma-prepare-dev-environment.html"},"click here"),"). Our colleagues will get you covered! ")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"domain - Your Kyma Cluster default or custom domain."),(0,o.kt)("admonition",{parentName:"li",type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"This parameter requires your default Kyma cluster domain (e.g. a1b2c3d4.kyma.ondemand.com). To get the default domain of your Kyma Cluster you can run the following kubectl command: "),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("inlineCode",{parentName:"p"},"kubectl get configMaps/shoot-info -n kube-system -o jsonpath='{.data.domain}'")),(0,o.kt)("blockquote",{parentName:"admonition"},(0,o.kt)("p",{parentName:"blockquote"},"This will return the required result like ",(0,o.kt)("em",{parentName:"p"},"a1b2c3d4.kyma.ondemand.com"),". ",(0,o.kt)("em",{parentName:"p"},"a1b2c3d4")," is a placeholder for a string of characters that\u2019s unique for your cluster (the so-called ",(0,o.kt)("strong",{parentName:"p"},"shootName")," which we need in the next step). ")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"shootName - The unique shoot name of your Kyma Cluster."),(0,o.kt)("admonition",{parentName:"li",type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"As Kyma is based on ",(0,o.kt)("a",{parentName:"p",href:"https://gardener.cloud/"},"Gardener"),", the managed Clusters are also called ",(0,o.kt)("strong",{parentName:"p"},"Shoot"),"-Clusters (flower analogy). In our sample the ",(0,o.kt)("strong",{parentName:"p"},"shootName")," parameter, ensures the uniqueness of application registered in the SAP BTP SaaS Registry. As the SaaS application names registered in the SaaS registry need to be unique across a SAP BTP region (e.g. eu10), the shootName of your Kyma cluster will be part of that SaaS application names. This ensures you are not colliding with any other developer deploying the sample application. To get the ",(0,o.kt)("strong",{parentName:"p"},"shootName")," of your Kyma Cluster, run the following kubectl command:  "),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("inlineCode",{parentName:"p"},"kubectl get configMaps/shoot-info -n kube-system -o jsonpath='{.data.shootName}'"),". "),(0,o.kt)("blockquote",{parentName:"admonition"},(0,o.kt)("p",{parentName:"blockquote"},"In a productive SAP BTP landscape, your ",(0,o.kt)("strong",{parentName:"p"},"shootName")," will always starts with a letter like ",(0,o.kt)("em",{parentName:"p"},"a1b2c3d4")," or with the prefix ",(0,o.kt)("strong",{parentName:"p"},"c-")," like c-1b2c3d4*. ")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"gateway - The Istio Ingress Gateway to be used."),(0,o.kt)("admonition",{parentName:"li",type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"This value only has to be changed if your Istio setup deviates from the default setup. For example, if you are using a custom domain and you have set up a new Istio Ingress Gateway for this domain. In that case, please update the respective property accordingly. For the ",(0,o.kt)("strong",{parentName:"p"},"Basic Version"),", you should be fine leaving the parameters unchanged. "))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"api - Details of the API Service workload. "),(0,o.kt)("admonition",{parentName:"li",type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"These values only need to be changed if your setup deviates from the default sample configuration. This is the case if you intentionally set a different ",(0,o.kt)("strong",{parentName:"p"},"fullName")," property for your API Service or expose a ",(0,o.kt)("strong",{parentName:"p"},"custom hostname"),". For the ",(0,o.kt)("strong",{parentName:"p"},"Basic Version"),", you should be fine leaving the parameters unchanged. "))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"broker - Details of the Service Broker workload. "),(0,o.kt)("admonition",{parentName:"li",type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"These values only need to be changed if your setup deviates from the default sample configuration. This is the case if you intentionally set a different ",(0,o.kt)("strong",{parentName:"p"},"fullName")," property for your Service Broker or expose a ",(0,o.kt)("strong",{parentName:"p"},"custom hostname"),". For the ",(0,o.kt)("strong",{parentName:"p"},"Basic Version"),", you should be fine leaving the parameters unchanged. "))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"router - Details of the Application Router workload."),(0,o.kt)("admonition",{parentName:"li",type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"These values only need to be changed if your setup deviates from the default sample configuration. This is the case if you intentionally set a different ",(0,o.kt)("strong",{parentName:"p"},"fullName")," property for your Application Router or expose a ",(0,o.kt)("strong",{parentName:"p"},"custom hostname"),". For the ",(0,o.kt)("strong",{parentName:"p"},"Basic Version"),", you should be fine leaving the parameters unchanged. ")),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"router"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"image.repository - Provide the details of your ",(0,o.kt)("a",{parentName:"p",href:"../3-build-your-docker-images/"},"Application Router")," Docker Image like \\<username",">","/susaas-router if your Image is stored in Docker Hub or ghcr.io/\\<namespace",">","/susaas-router in case of GitHub. For other Container Registries, please check the respective provider documentation.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"image.tag - Provide a different tag, if you do not want to use the latest image (default). "))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"srv")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"image.repository - Provide the details of your ",(0,o.kt)("a",{parentName:"li",href:"../3-build-your-docker-images/"},"Backend Service")," Docker Image repository like \\<username",">","/susaas-srv if your Image is stored in Docker Hub or ghcr.io/\\<namespace",">","/susaas-src in case of GitHub. For other Container Registries, please check the respective provider documentation."),(0,o.kt)("li",{parentName:"ul"},"image.tag - Provide a different tag, if you do not want to use the latest image. ")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"api")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"image.repository - Provide the details of your ",(0,o.kt)("a",{parentName:"p",href:"../3-build-your-docker-images/"},"API Service")," Docker Image repository like \\<username",">","/susaas-api if your Image is stored in Docker Hub or ghcr.io/\\<namespace",">","/susaas-api in case of GitHub. For other Container Registries, please check the respective provider documentation.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"image.tag - Provide a different tag, if you do not want to use the latest image (default). ")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"apim - For now, do not provide any values for this section and keep the integration Disabled. The integration of SAP API Management will be explained as part of the ",(0,o.kt)("strong",{parentName:"p"},"Advanced Version")," (",(0,o.kt)("a",{parentName:"p",href:"/PAA/@navyakhurana-patch-3/project-panel/advanced/integrate-sap-api-management/"},"click here"),")."))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"broker")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"image.repository - Provide the details of your ",(0,o.kt)("a",{parentName:"p",href:"../3-build-your-docker-images/"},"API Service Broker")," Docker Image repository like \\<username",">","/susaas-broker if your Image is stored in Docker Hub or ghcr.io/\\<namespace",">","/susaas-broker in case of GitHub. For other Container Registries, please check the respective provider documentation.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"image.tag - Provide a different tag, if you do not want to use the latest image (default). ")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"config.serviceId + planId(s) - You can provide unique GUIDs (e.g., 332e966f-a1ab-a2ab-a3ab-b9facec65bad) for your service plans and the broker instance itself. If you do not provide any GUIDs, they will be auto-generated by Helm upon deployment! "))),(0,o.kt)("admonition",{type:"warning"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Warning")," "),(0,o.kt)("p",{parentName:"admonition"},"While auto-generating the GUIDs is fine for testing purposes, in a productive scenario those GUIDs must remain constant after first deployment. Therefore, we recommend to generate GUIDs upfront using your command line or available generators and providing them right here.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"hana_deployer")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"image.repository - Provide the details of your ",(0,o.kt)("a",{parentName:"li",href:"../3-build-your-docker-images/"},"HDI Container Deployer")," Docker Image repository like \\<username",">","/susaas-db-com if your Image is stored in Docker Hub or ghcr.io/\\<namespace",">","/susaas-db-com in case of GitHub. For other Container Registries, please check the respective provider documentation."),(0,o.kt)("li",{parentName:"ul"},"image.tag - Provide a different tag, if you do not want to use the latest image (default). ")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"html5_apps_deployer")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"image.repository - Provide the details of your ",(0,o.kt)("a",{parentName:"li",href:"../3-build-your-docker-images/"},"HTML5 Apps Deployer")," Docker Image repository like \\<username",">","/susaas-html5-deployer if your Image is stored in Docker Hub or ghcr.io/\\<namespace",">","/susaas-html5-deployer in case of GitHub. For other Container Registries, please check the respective provider documentation."),(0,o.kt)("li",{parentName:"ul"},"image.tag - Provide a different tag, if you do not want to use the latest image (default). ")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"destination")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"parameters.init_data.instance.destinations",(0,o.kt)("admonition",{parentName:"li",type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"Feel free to update the SAPUI5 version used by the ",(0,o.kt)("strong",{parentName:"p"},"ui5")," destination.")))),(0,o.kt)("p",null,"3.3. Before running the respective ",(0,o.kt)("strong",{parentName:"p"},"Helm")," commands to generate the Kubernetes resource definitions, please configure the ",(0,o.kt)("strong",{parentName:"p"},"redirect-uris")," of you ",(0,o.kt)("em",{parentName:"p"},"xs-security.json")," (",(0,o.kt)("a",{parentName:"p",href:"../../../code/charts/sustainable-saas/xs-security.json"},"click here"),"). In the ",(0,o.kt)("strong",{parentName:"p"},"oauth2-configuration")," section, please provide your default Cluster Domain or your Custom Domain (if configured). Keep the ",(0,o.kt)("strong",{parentName:"p"},"localhost")," redirects for local testing purposes. "),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"Use the following ",(0,o.kt)("strong",{parentName:"p"},"kubectl")," command to get your default Cluster domain\n",(0,o.kt)("inlineCode",{parentName:"p"},"kubectl get configMaps/shoot-info -n kube-system -o jsonpath='{.data.domain}'"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"oauth2-configuration": {\n  "token-validity": 900,\n  "redirect-uris": [\n    "https://*.a1b2c3d4.kyma.ondemand.com/**", // <<- Replace a1b2c3d4.kyma.ondemand.com with your default Cluster Domain or Custom Domain\n    "http://*.localhost:5000/**",\n    "http://localhost:5000/**"\n  ],\n  "credential-types": [\n    "binding-secret",\n    "x509"\n  ]\n}\n')),(0,o.kt)("p",null,"3.4. Wow, that was quite some work but luckily this is a one-time action. Let's relax and check if your Kubernetes resource definitions are successfully generated by Helm, running the following command within the ",(0,o.kt)("em",{parentName:"p"},"code")," directory."),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"In case of errors, check if you maybe missed one of the above parameters or a mistake (like a space or special character) has slipped in.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"helm template ./charts/sustainable-saas\n")),(0,o.kt)("p",null,"This will log the generated ",(0,o.kt)("strong",{parentName:"p"},"yaml")," files in your console. If required, you can also store the results into a local file by running the following command. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"helm template ./charts/sustainable-saas > helm-template.yaml\n")),(0,o.kt)("p",null,"Double-check if the correct Docker Image repositories can be found in the generated resource definitions before you continue with the next chapter. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app.kubernetes.io/name: broker\n  name: release-name-broker\nspec:\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: broker\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: broker\n    spec:\n      containers:\n      - image: sap-demo/susaas-broker:latest # <---\n        name: broker\n")),(0,o.kt)("h2",{id:"4-deploy-to-your-kyma-cluster"},"4. Deploy to your Kyma Cluster"),(0,o.kt)("p",null,"While we could have skipped the whole part of building your own Docker Images and updating most of the ",(0,o.kt)("em",{parentName:"p"},"values.yaml")," parameters, it is essential to understand both process steps! If you would like to apply any changes to the provided sample application, this is the actual way to proceed. Okay, but finally you should now be all set to deploy the sample application (based on your own Docker Images) to your Kyma Cluster. "),(0,o.kt)("p",null,"4.1. First of all, deploy a ",(0,o.kt)("strong",{parentName:"p"},"SAP Alert Notification Service")," instance to your namespace of choice. Before doing so, please update the recipient e-mail address for the respective notifications in the values.yaml file (",(0,o.kt)("a",{parentName:"p",href:"../../../code/charts/alert-notification/values.yaml"},(0,o.kt)("em",{parentName:"a"},"./charts/alert-notification/values.yaml")),")."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"# SAP Alert Notification Service \nalert_notification:\n  fullnameOverride: alert-notification\n  serviceOfferingName: destination\n  servicePlanName: lite\n  parameters:\n    configuration:\n      actions:\n        - name: send-email\n          properties:\n            destination: john.doe@example.com # Update to your receiver e-mail address\n          state: ENABLED\n          type: EMAIL\n  ...\n")),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Important")," "),(0,o.kt)("p",{parentName:"admonition"},"In case of SAP BTP ",(0,o.kt)("strong",{parentName:"p"},"Trial Account")," usage, please make sure to change the ",(0,o.kt)("strong",{parentName:"p"},"servicePlanName")," to ",(0,o.kt)("strong",{parentName:"p"},"lite"),"!")),(0,o.kt)("p",null,"4.2. Save your changes and deploy the Alert Notification Service Instance to your desired Kyma Namespace, by running the following ",(0,o.kt)("strong",{parentName:"p"},"Helm")," command from within the ",(0,o.kt)("em",{parentName:"p"},"code")," directory. "),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"There can only be one Alert Notification Service instance per Kyma Namespace (or Cloud Foundry Space). Given this restriction, SAP Alert Notification Service is deployed as a standalone Helm installation in our example. Binding that Service Instance to the lifecycle of our SaaS application might conflict with other applications also requiring Alert Notification Service in the same namespace.")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"You might be asked to re-login to your Cluster using Multi-Factor-Authentication, when running ",(0,o.kt)("strong",{parentName:"p"},"helm")," commands from time to time.   ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"helm install alert-notification ./charts/alert-notification --namespace <namespace>\n")),(0,o.kt)("p",null,"4.3. After the Alert Notification Service has been deployed (wait for a confirmation in the console or check the Helm Release status in the Kyma Dashboard), please run the following command from within the ",(0,o.kt)("em",{parentName:"p"},"code")," directory to deploy the Sustainable SaaS sample application to a namespace of your choice."),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"Feel free to add the ",(0,o.kt)("em",{parentName:"p"},"--debug")," parameter to get some more verbose output if you're interested what's happening under the hood!")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"helm install susaas ./charts/sustainable-saas --namespace <namespace> (--debug)\n")),(0,o.kt)("p",null,"An alternative approach using the ",(0,o.kt)("em",{parentName:"p"},"helm upgrade")," command would look as follows. This will either upgrade an existing installation of our SaaS sample application or install a new version if not available in the respective namespace yet. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"helm upgrade susaas ./charts/sustainable-saas --install --namespace <namespace> (--debug)\n")),(0,o.kt)("p",null,"4.4. The deployment of the Helm Release to your Kyma cluster, will take a few minutes. "),(0,o.kt)("p",null,"4.5. You can use this time to switch back to your Kyma Dashboard, where you can monitor the installation/deployment progress and respective objects being instantiated. Once you see the following four ",(0,o.kt)("strong",{parentName:"p"},"Pods")," in ",(0,o.kt)("strong",{parentName:"p"},"Running")," state, your deployment finished successfully. "),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Trivia")," - We're kind of mixing up the terms Deployment/Installation/Release in this tutorial. ")),(0,o.kt)("p",null," ",(0,o.kt)("img",{alt:"&lt;img src=&quot;./images/PodOverview.png&quot; width=&quot;400&quot;/&gt;",src:a(83444).Z,width:"1754",height:"754"})),(0,o.kt)("p",null,"4.6. You can also check the successful deployment of your application in the ",(0,o.kt)("strong",{parentName:"p"},"Apps")," section of the Kyma Dashboard. Here you can find all ",(0,o.kt)("strong",{parentName:"p"},"Helm Releases"),". "),(0,o.kt)("p",null," ",(0,o.kt)("img",{alt:"&lt;img src=&quot;./images/HelmOverview.png&quot; width=&quot;400&quot;/&gt;",src:a(47985).Z,width:"1469",height:"611"})),(0,o.kt)("p",null,"4.7. For any further updates of the Helm Release, you must now use the ",(0,o.kt)("em",{parentName:"p"},"helm upgrade")," command (already mentioned above)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"helm upgrade susaas ./charts/sustainable-saas --namespace <namespace> (--debug)\n")),(0,o.kt)("p",null,"4.8. To undeploy/uninstall a Helm Release, you can use the following command. "),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Important")," "),(0,o.kt)("p",{parentName:"admonition"},"Please make sure to check the respective ",(0,o.kt)("strong",{parentName:"p"},"Undeploy")," chapter of the documentation first! Uninstalling a SaaS application with existing subscribers, can result in corrupt Service Instance setups which are very cumbersome to resolve. ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"helm uninstall susaas --namespace <namespace>\n")),(0,o.kt)("h2",{id:"5-multiple-deployments"},"5. Multiple Deployments"),(0,o.kt)("p",null,"The sample application has been designed for multiple deployments in the ",(0,o.kt)("strong",{parentName:"p"},"same Kyma Namespace")," using ",(0,o.kt)("strong",{parentName:"p"},"different")," Release Names (e.g., susaas-dev, susaas-test, susaas-prod). If required, the sample application can also be deployed to ",(0,o.kt)("strong",{parentName:"p"},"different Kyma Namespaces")," using the ",(0,o.kt)("strong",{parentName:"p"},"same")," Release Name (e.g., susaas in default namespace, susaas in test namespace). "),(0,o.kt)("p",null,"The (Helm) Release Name, is the value following the ",(0,o.kt)("em",{parentName:"p"},"helm install")," command. You can have multiple releases based on the same Helm Chart if required. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"helm install susaas-dev ./charts/sustainable-saas --namespace <namespace> (--debug)\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"1 ** n installations with different Release Names (using the same Kyma Namespace)"),(0,o.kt)("li",{parentName:"ul"},"1 ** n installations in different Kyma Namespaces (using same Release Name)")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,o.kt)("p",{parentName:"admonition"},"Please note, you can not deploy the application to equally named namespaces in different Kyma Clusters of the same SAP BTP subaccount. In this case, the Role Collection names will collide. Still, feel free to cover this requirement yourself by adapting the Role Collection name logic. ")),(0,o.kt)("p",null,"The respective Kyma Namespace and Release Name will be part of your ",(0,o.kt)("strong",{parentName:"p"},"xsappname")," and also part of your SAP BTP Role Collections. To ensure the uniqueness of applications registered in the SAP BTP SaaS Registry Service, please make sure to provide the correct ",(0,o.kt)("strong",{parentName:"p"},"shootName")," property in your ",(0,o.kt)("em",{parentName:"p"},"values.yaml")," file! The same application name can only be registered once in the same SAP BTP region (e.g., eu10)."))}c.isMDXComponent=!0},36672:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Deployments-0c28db2dc2b3706aa7a2fc933dcdc786.png"},47985:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/HelmOverview-18906fa02360bcc1a45faef050251f2f.png"},81690:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/ImageOverview-36689dba87e2411fd37853cc50ccfc2f.png"},13480:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/IstioInjectionLabel-5153997af385f8d4efc3e6569cb69206.png"},80011:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/JobsOverview-3b5245af8378fd230e9800cfa9e414d5.png"},74735:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Kubeconfig-e531fbdd2642cfa5fbecfbacc91e16da.png"},83444:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/PodOverview-69ac20bd57a97a1ca61b134aa724203b.png"},17885:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/ServiceInstancesCf-9b5349ef4cf21074b71e6e3f0d2b344e.png"},57272:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/ServiceInstancesKyma-8291968ba74cd992953d4bff6c60e113.png"}}]);
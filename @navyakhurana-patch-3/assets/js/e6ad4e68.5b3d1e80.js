"use strict";(self.webpackChunkpaa_doc=self.webpackChunkpaa_doc||[]).push([[5255],{3905:(e,a,t)=>{t.d(a,{Zo:()=>p,kt:()=>d});var n=t(67294);function l(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function r(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){l(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,n,l=function(e,a){if(null==e)return{};var t,n,l={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(l[t]=e[t]);return l}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var o=n.createContext({}),m=function(e){var a=n.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):r(r({},a),e)),t},p=function(e){var a=m(e.components);return n.createElement(o.Provider,{value:a},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},h=n.forwardRef((function(e,a){var t=e.components,l=e.mdxType,s=e.originalType,o=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=m(t),h=l,d=u["".concat(o,".").concat(h)]||u[h]||c[h]||s;return t?n.createElement(d,r(r({ref:a},p),{},{components:t})):n.createElement(d,r({ref:a},p))}));function d(e,a){var t=arguments,l=a&&a.mdxType;if("string"==typeof e||l){var s=t.length,r=new Array(s);r[0]=h;var i={};for(var o in a)hasOwnProperty.call(a,o)&&(i[o]=a[o]);i.originalType=e,i[u]="string"==typeof e?e:l,r[1]=i;for(var m=2;m<s;m++)r[m]=t[m];return n.createElement.apply(null,r)}return n.createElement.apply(null,t)}h.displayName="MDXCreateElement"},18629:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>o,contentTitle:()=>r,default:()=>c,frontMatter:()=>s,metadata:()=>i,toc:()=>m});var n=t(87462),l=(t(67294),t(3905));const s={},r="Helm Charts",i={unversionedId:"project-panel/basic/kyma-resources-helm/components/HelmCharts",id:"project-panel/basic/kyma-resources-helm/components/HelmCharts",title:"Helm Charts",description:"This part of the tutorial contains a brief documentation on the topic of Helm and how it is being used in the context of our Sustainable SaaS sample application. Helm is an extremely powerful tool set simplifying the automated definition of Kubernetes/Kyma resources and the subsequent deployment to your Cluster.",source:"@site/docs/project-panel/2-basic/8-kyma-resources-helm/components/HelmCharts.md",sourceDirName:"project-panel/2-basic/8-kyma-resources-helm/components",slug:"/project-panel/basic/kyma-resources-helm/components/HelmCharts",permalink:"/PAA/@navyakhurana-patch-3/project-panel/basic/kyma-resources-helm/components/HelmCharts",draft:!1,tags:[],version:"current",lastUpdatedBy:"Navya Khurana",lastUpdatedAt:1742197159,formattedLastUpdatedAt:"Mar 17, 2025",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Components",permalink:"/PAA/@navyakhurana-patch-3/category/components"},next:{title:"Resource Overview",permalink:"/PAA/@navyakhurana-patch-3/project-panel/basic/kyma-resources-helm/components/ResourceOverview"}},o={},m=[{value:"1. Introduction",id:"1-introduction",level:2},{value:"Introduction to fundamental Helm concepts",id:"introduction-to-fundamental-helm-concepts",level:3},{value:"Understanding the fundamental Helm commands",id:"understanding-the-fundamental-helm-commands",level:3},{value:"2. Understanding the general purpose of Helm Charts",id:"2-understanding-the-general-purpose-of-helm-charts",level:2},{value:"3. Getting Started with the sample application Helm Charts",id:"3-getting-started-with-the-sample-application-helm-charts",level:2},{value:"3.1. Chart.yaml file",id:"31-chartyaml-file",level:3},{value:"3.2. Values.yaml file",id:"32-valuesyaml-file",level:3},{value:"3.3. values.schema.json and values.root.schema.json files",id:"33-valuesschemajson-and-valuesrootschemajson-files",level:3},{value:"3.4. Templates in Helm Chart",id:"34-templates-in-helm-chart",level:3},{value:"3.5. Render Helm Chart to preview the Kyma Resources",id:"35-render-helm-chart-to-preview-the-kyma-resources",level:3},{value:"4. Customizing the Helm Chart using templates",id:"4-customizing-the-helm-chart-using-templates",level:2},{value:"4.1. Creating a Config Map and adding it as a template",id:"41-creating-a-config-map-and-adding-it-as-a-template",level:3},{value:"4.2. Adding a simple template call",id:"42-adding-a-simple-template-call",level:3},{value:"4.3. Using values from the values.yaml file",id:"43-using-values-from-the-valuesyaml-file",level:3},{value:"4.4. Using built-in functions of Helm templates",id:"44-using-built-in-functions-of-helm-templates",level:3},{value:"5. Reusing templates via named templates",id:"5-reusing-templates-via-named-templates",level:2},{value:"Defining a named template",id:"defining-a-named-template",level:3},{value:"Reusing existing named templates from helper files",id:"reusing-existing-named-templates-from-helper-files",level:3},{value:"6. Relation between Umbrella Charts the Subcharts",id:"6-relation-between-umbrella-charts-the-subcharts",level:2},{value:"7. Further Readings",id:"7-further-readings",level:2}],p={toc:m},u="wrapper";function c(e){let{components:a,...s}=e;return(0,l.kt)(u,(0,n.Z)({},p,s,{components:a,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"helm-charts"},"Helm Charts"),(0,l.kt)("p",null,"This part of the tutorial contains a brief documentation on the topic of Helm and how it is being used in the context of our Sustainable SaaS sample application. Helm is an extremely powerful tool set simplifying the automated definition of Kubernetes/Kyma resources and the subsequent deployment to your Cluster. "),(0,l.kt)("p",null,"Given the sheer complexity of Helm, this tutorial will only cover certain basic aspects that will simplify starting your own learning journey. Once you start adapting the templates based on your own needs, there will be no shortcut but a deep-dive into the official documentation is inevitable."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#helm-charts"},"Helm Charts"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#1-introduction"},"1. Introduction"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#introduction-to-fundamental-helm-concepts"},"Introduction to fundamental Helm concepts")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#understanding-the-fundamental-helm-commands"},"Understanding the fundamental Helm commands")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#2-understanding-the-general-purpose-of-helm-charts"},"2. Understanding the general purpose of Helm Charts")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#3-getting-started-with-the-sample-application-helm-charts"},"3. Getting Started with the sample application Helm Charts"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#31-chartyaml-file"},"3.1. Chart.yaml file")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#32-valuesyaml-file"},"3.2. Values.yaml file")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#33-valuesschemajson-and-valuesrootschemajson-files"},"3.3. values.schema.json and values.root.schema.json files")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#34-templates-in-helm-chart"},"3.4. Templates in Helm Chart")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#35-render-helm-chart-to-preview-the-kyma-resources"},"3.5. Render Helm Chart to preview the Kyma Resources")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#4-customizing-the-helm-chart-using-templates"},"4. Customizing the Helm Chart using templates"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#41-creating-a-config-map-and-adding-it-as-a-template"},"4.1. Creating a Config Map and adding it as a template")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#42-adding-a-simple-template-call"},"4.2. Adding a simple template call")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#43-using-values-from-the-valuesyaml-file"},"4.3. Using values from the values.yaml file")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#44-using-built-in-functions-of-helm-templates"},"4.4. Using built-in functions of Helm templates")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#5-reusing-templates-via-named-templates"},"5. Reusing templates via named templates"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#defining-a-named-template"},"Defining a named template")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#reusing-existing-named-templates-from-helper-files"},"Reusing existing named templates from helper files")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#6-relation-between-umbrella-charts-the-subcharts"},"6. Relation between Umbrella Charts the Subcharts")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#7-further-readings"},"7. Further Readings"))))),(0,l.kt)("h2",{id:"1-introduction"},"1. Introduction"),(0,l.kt)("p",null,"Before proceeding with this tutorial, please make sure you have ",(0,l.kt)("a",{parentName:"p",href:"https://helm.sh/docs/intro/install/#helm"},"installed Helm")," on your local device!"),(0,l.kt)("p",null,'Helm can be thought of as a "box" that contains all the necessary components and instructions for deploying and managing an application on a Kubernetes (K8s - for the eight characters between K and s) Cluster.'),(0,l.kt)("p",null,"Imagine you have a box full of different parts and pieces for building a toy car. The box contains the wheels, the body, the engine, and the instructions for putting it all together."),(0,l.kt)("p",null,"Similarly, a Helm Chart contains all the necessary components for deploying an application on a Kubernetes Cluster, such as the Container images, configuration files, and instructions for creating and managing the various Kubernetes resources, such as Pods and Services. You can find the official Helm documentation and great tutorials ",(0,l.kt)("a",{parentName:"p",href:"https://helm.sh/"},"here"),"."),(0,l.kt)("h3",{id:"introduction-to-fundamental-helm-concepts"},"Introduction to fundamental Helm concepts"),(0,l.kt)("p",null,"Understanding the fundamental ideas of Helm is necessary if you want to use Helm to successfully manage applications running on Kubernetes. Helm's package management system is built around these ideas."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Chart"),": A Helm Chart is a set of files defining the Kubernetes resources required to operate a specific application. Kubernetes Deployments, Services, and Service Entry objects, as well as Config Maps, Secrets, and Persistent Volume Claims, are examples of these resources."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Release"),": A Helm release is the deployed instance of a Helm Chart. Each release has its own unique name and specific version."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Value"),": Helm values \u200b\u200bare configurable parameters used by charts to customize Deployments. Values \u200b\u200bcan be set in a variety of ways, including command line arguments and (as in our case) ",(0,l.kt)("em",{parentName:"li"},"values.yaml")," \u200b\u200bfiles. "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Template"),": A Helm template is a file that defines the structure of a Kubernetes manifest file. A template is used to generate a Kubernetes manifest file from a chart using values \u200b\u200bprovided during installation. "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Dependency"),": A Helm dependency is another Helm Chart that your chart depends on in order to function properly."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Repository"),": From a high level perspective, a Chart Repository is a location where charts can be stored and shared. The Helm client packs and ships Helm Charts to a Chart Repository. Simply speaking, a Chart Repository is a basic HTTP server that hosts an index.yaml file and some packaged charts.")),(0,l.kt)("h3",{id:"understanding-the-fundamental-helm-commands"},"Understanding the fundamental Helm commands"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"helm install: A chart is installed on a Kubernetes/Kyma Cluster using this command, which also creates any Deployments, Services, and Containers that are required."),(0,l.kt)("li",{parentName:"ol"},"helm upgrade: This command updates an already released chart to a new version or allows configuration value adjustments."),(0,l.kt)("li",{parentName:"ol"},"helm delete: This command deletes a release from a Kubernetes/Kyma Cluster, removing all associated Kubernetes/Kyma resources."),(0,l.kt)("li",{parentName:"ol"},"helm template: This command generates the Kubernetes/Kyma manifest files for a chart, without installing it, allowing users to see what will be created before actually installing the chart.")),(0,l.kt)("h2",{id:"2-understanding-the-general-purpose-of-helm-charts"},"2. Understanding the general purpose of Helm Charts"),(0,l.kt)("p",null,"A Helm Chart is a package that contains all the necessary information and configuration to deploy and manage an application on a Kubernetes/Kyma Cluster. It is used by Helm, which is a package manager for Kubernetes, to automate the deployment and management of applications on the Cluster."),(0,l.kt)("p",null,"A Helm Chart is defined using a YAML file called ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/blob/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/Chart.yaml"},"Chart.yaml"),", which contains metadata about the chart such as its name, version, and description. The chart also includes a collection of templates written in Go Templating Language, that define the configuration for Kubernetes resources such as Pods, Services, Deployments."),(0,l.kt)("p",null,"For more detailed information, please refer to the official Helm documentation (",(0,l.kt)("a",{parentName:"p",href:"%5Bhere%5D(https://helm.sh/)"},"click here"),"."),(0,l.kt)("h2",{id:"3-getting-started-with-the-sample-application-helm-charts"},"3. Getting Started with the sample application Helm Charts"),(0,l.kt)("p",null,"As you might see from the repository, the chart directory looks as below."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"&lt;img src=&quot;./images/HELM_Chart_Dir.png&quot; width=&quot;100&quot;/&gt;",src:t(49766).Z,width:"450",height:"386"})),(0,l.kt)("p",null,"In following sections you will be inspecting the files and their purposes in the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/tree/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/charts"},"chart")," directory."),(0,l.kt)("h3",{id:"31-chartyaml-file"},"3.1. ",(0,l.kt)("a",{parentName:"h3",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/blob/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/Chart.yaml"},"Chart.yaml")," file"),(0,l.kt)("p",null,"Chart.yaml is a file in a Helm Chart that contains metadata about the chart, including its name, version, description, and other information. This file is used by Helm to manage the chart and its dependencies, and it is required for every Helm Chart."),(0,l.kt)("p",null,"The Chart.yaml file contains information about the Helm Chart such as:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"name"),": The name of the Helm Chart")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"version"),': The version of the Helm Chart. This must be a Semantic Versioning (SemVer) compatible version string, such as "1.2.3".')),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"appVersion"),": The version of the application a Helm Chart represents. This is separate from the Helm Chart version and is used to track changes to the application itself, independent of changes to the Helm Chart.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"description"),": Provides general information on what this Helm Chart is doing.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"dependencies"),": An array of other charts that this Helm Chart depends on.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"type"),": The type field specifies the type of the Helm Chart (in this case ",(0,l.kt)("strong",{parentName:"p"},"application"),")"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v2  \nname: susaas-app\ndescription: Sustainable SaaS\ntype: application\nversion: 0.0.1\nappVersion: 0.0.1\ndependencies:\n  - name: susaas-srv\n    alias: srv\n    version: 0.1.0\n  - name: susaas-router\n    alias: router\n    version: 0.1.0\n  - name: susaas-broker\n    alias: broker\n    version: 0.1.0\n  - name: susaas-api\n    alias: api\n    version: 0.1.0\n")),(0,l.kt)("admonition",{parentName:"li",type:"tip"},(0,l.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,l.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,l.kt)("p",{parentName:"admonition"},"This Helm Chart contains four so-called Subcharts as dependencies. These charts are separate Helm Charts and the relation will be covered in detail by this documentation.")))),(0,l.kt)("h3",{id:"32-valuesyaml-file"},"3.2. ",(0,l.kt)("a",{parentName:"h3",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/blob/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/values.yaml"},"Values.yaml")," file"),(0,l.kt)("p",null,"The ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/blob/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/values.yaml"},"values.yaml")," file is used to specify a range of options and settings that control the behavior and configuration of a chart. "),(0,l.kt)("p",null,"For example, it might include values for resource limits, image names, feature flags, and other settings that control the behavior and appearance of the components defined in a chart."),(0,l.kt)("p",null,"Please take a look at the given section of ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/blob/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/values.yaml"},"values.yaml")," file below, to get a better understanding."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"...\nrouter:\n  bindings:\n    xsuaa:\n      serviceInstanceName: xsuaa\n    destination:\n      serviceInstanceName: destination\n    html5-apps-repo:\n      serviceInstanceName: html5-repo-runtime\n  image:\n    repository: sapse/susaas-router\n    tag: latest\n  resources:\n    limits:\n      ephemeral-storage: 1G\n      memory: 500M\n      cpu: 300m\n    requests:\n      ephemeral-storage: 1G\n      cpu: 300m\n      memory: 500M\n...\n")),(0,l.kt)("p",null,"Above part is the section of a YAML file used for configuring a Kubernetes Deployment for the ",(0,l.kt)("strong",{parentName:"p"},"Application Router")," of our sample application. "),(0,l.kt)("p",null,"The Deployment consists of:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},'A Docker image located at "sapse/susaas-router" with the "latest" tag'),(0,l.kt)("li",{parentName:"ul"},"Resource requests and limits for the Deployment",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Ephemeral storage: 1G"),(0,l.kt)("li",{parentName:"ul"},"Memory: 500M"),(0,l.kt)("li",{parentName:"ul"},"CPU: 300m")))),(0,l.kt)("p",null,"The Deployment also has three SAP BTP Service Instances bound to it:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"xsuaa (Authorization & Trust Management Service)"),(0,l.kt)("li",{parentName:"ul"},"destination (Destination Service)"),(0,l.kt)("li",{parentName:"ul"},"html5-apps-repo (HTML5 Application Repository Service)")),(0,l.kt)("h3",{id:"33-valuesschemajson-and-valuesrootschemajson-files"},"3.3. ",(0,l.kt)("a",{parentName:"h3",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/blob/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/values.schema.json"},"values.schema.json")," and ",(0,l.kt)("a",{parentName:"h3",href:"../../../../code/charts/sustainable-saas/values.root.schema.json"},"values.root.schema.json")," files"),(0,l.kt)("p",null,"These two JSON files are so-called schema files. A JSON schema is a standard for describing the structure and constraints of JSON data, and it is also used to validate ",(0,l.kt)("em",{parentName:"p"},"values.yaml")," values. This ensures that values provided by the user follow the schema laid out by the chart maintainer, providing better error reporting when the user provides an incorrect set of values for a chart."),(0,l.kt)("p",null,"Validation occurs when any of the following commands is invoked:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"helm install"),(0,l.kt)("li",{parentName:"ul"},"helm upgrade"),(0,l.kt)("li",{parentName:"ul"},"helm template"),(0,l.kt)("li",{parentName:"ul"},"helm lint")),(0,l.kt)("p",null,"For example, let us add a test property in the ",(0,l.kt)("strong",{parentName:"p"},"router")," section of the ",(0,l.kt)("em",{parentName:"p"},"values.yaml")," file as shown below:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"...\nrouter:\n  bindings:\n    xsuaa:\n      serviceInstanceName: xsuaa\n    destination:\n      serviceInstanceName: destination\n    html5-apps-repo:\n      serviceInstanceName: html5-repo-runtime\n  image:\n    repository: sapse/susaas-router\n    tag: latest\n  resources:\n    limits:\n      ephemeral-storage: 1G\n      memory: 500M\n      cpu: 300m\n    requests:\n      ephemeral-storage: 1G\n      cpu: 300m\n      memory: 500M\n  test: my value ##\xa0This property has been added\n...\n")),(0,l.kt)("p",null,"Try to run the following command in the root directory:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"helm template ./code/charts/sustainable-saas \n")),(0,l.kt)("p",null,"You should instantly face an error, because ",(0,l.kt)("strong",{parentName:"p"},"test")," is an invalid value according to the JSON schema configuration."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"Error: ...\nrouter:\n- resources.requests: Additional property test is not allowed\n")),(0,l.kt)("p",null,"Proper schema files can be used to validate template parameters, which becomes especially useful when shipping your Helm Charts to a broader audience! For now, please remove the ",(0,l.kt)("strong",{parentName:"p"},"test")," property again, to make the chart installable and valid for upcoming sections again."),(0,l.kt)("h3",{id:"34-templates-in-helm-chart"},"3.4. ",(0,l.kt)("a",{parentName:"h3",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/tree/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/templates"},"Templates")," in Helm Chart"),(0,l.kt)("p",null,"Templates in Helm Charts are files that define how resources should be deployed to a Kyma Cluster. They are used to generate manifest files for Kyma/Kubernetes resources, such as Pods, Services or Service Bindings, based on chart-defined values and configuration parameters. Templates are written in the ",(0,l.kt)("strong",{parentName:"p"},"Helm template language(*)")," and use its syntax and features to dynamically generate the manifests based on user-defined and default values of the chart."),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,l.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,l.kt)("p",{parentName:"admonition"},"(*) Helm Template Language definition according to ",(0,l.kt)("a",{parentName:"p",href:"https://helm.sh/docs/chart_template_guide/functions_and_pipelines/"},"Helm official documentation"),': "While we talk about the "Helm template language" as if it is Helm-specific, it is actually a combination of the Go template language, some extra functions, and a variety of wrappers to expose certain objects to the templates. Many resources on Go templates may be helpful as you learn about templating."')),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/tree/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/templates"},"./code/chart/templates")," directory contains the templates of the Helm Chart."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"&lt;img src=&quot;./images/HELM_Chart_Temp_Dir.png&quot; width=&quot;500&quot;/&gt;",src:t(97357).Z,width:"1152",height:"1250"})),(0,l.kt)("p",null,"The ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/tree/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/templates"},"templates")," directory contains the template files, which will be converted to Kubernetes resource definitions when running ",(0,l.kt)("em",{parentName:"p"},"helm template")," or ",(0,l.kt)("em",{parentName:"p"},"helm install"),". "),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,l.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Important")," "),(0,l.kt)("p",{parentName:"admonition"},"Filenames starting with an underscore (_) are assumed not to contain a manifest template inside. These files are not converted to Kubernetes resource definitions, but are available within other chart templates for reuse purposes. Details will be covered in further sections.")),(0,l.kt)("h3",{id:"35-render-helm-chart-to-preview-the-kyma-resources"},"3.5. Render Helm Chart to preview the Kyma Resources"),(0,l.kt)("p",null,"Without actually deploying a chart to a Kyma/Kubernetes Cluster, you can use the ",(0,l.kt)("strong",{parentName:"p"},"helm template")," command to preview its final state. Doing so, you can see which Kubernetes resources will be created and how they will be configured. Furthermore, the template command can also be used to test and debug a chart."),(0,l.kt)("p",null,"Feel free to run the command below, to see the generated Kubernetes resources of the sample application."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"helm template ./code/charts/sustainable-saas\n")),(0,l.kt)("p",null,"Running this command will provide you a yaml-based console output. This output contains all necessary Kyma/Kubernetes resources to deploy the Sustainable SaaS application on a Kyma Cluster. "),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,l.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Hint")," "),(0,l.kt)("p",{parentName:"admonition"},"The example below is (obviously) just a part of the generated resources. The complete console output is much longer.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'...\n# Source: susaas/charts/srv/templates/api-rule.yaml\napiVersion: gateway.kyma-project.io/v1beta1\nkind: APIRule\nmetadata:\n  name: release-name-srv\n  labels:\n    helm.sh/revision: "1"\n    helm.sh/chart: srv-0.1.0\n    app.kubernetes.io/managed-by: Helm\n    app.kubernetes.io/name: srv\n    app.kubernetes.io/instance: release-name\n    app.kubernetes.io/component: srv\n    app.kubernetes.io/partOf: susaas\nspec:\n  gateway: demo-dns/sap-demo-gateway\n  host: release-name-srv-default.sap-demo.com\n  rules:\n  - methods: ["GET", "POST", "PUT", "DELETE", "PATCH", "HEAD"]\n    path: /-/cds/.*\n    accessStrategies:\n      - handler: allow\n  service:\n    name: release-name-srv\n    port: 8080\n---\n# Source: susaas/charts/router/templates/istio-dest-rule.yaml\napiVersion: networking.istio.io/v1alpha3\nkind: DestinationRule\nmetadata:\n  name: release-name-router\n  labels:\n    helm.sh/revision: "1"\n    helm.sh/chart: router-0.1.0\n    app.kubernetes.io/managed-by: Helm\n    app.kubernetes.io/name: router\n    app.kubernetes.io/instance: release-name\n    app.kubernetes.io/component: router\n    app.kubernetes.io/partOf: susaas\nspec:\n  host: release-name-router.default.svc.Cluster.local\n  trafficPolicy:\n    loadBalancer:\n      consistentHash:\n        httpCookie:\n          name: JSESSIONID\n          path: /\n          ttl: 0s\n...\n')),(0,l.kt)("h2",{id:"4-customizing-the-helm-chart-using-templates"},"4. Customizing the Helm Chart using templates"),(0,l.kt)("p",null,"Now that you have learned about the Helm Chart basics of Sustainable SaaS Application, you can add your own custom template to get a better understand of how templates work."),(0,l.kt)("p",null,"Making your own template file can be a worthwhile learning experience. You gain a deeper understanding of Helm's behavior and how to use it to manage your resources in a Kyma Cluster."),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,l.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Information")),(0,l.kt)("p",{parentName:"admonition"},"If you want to gain deeper understanding of Helm templating it is strongly recommended to follow ",(0,l.kt)("a",{parentName:"p",href:"https://helm.sh/docs/chart_template_guide/getting_started/"},"Chart Template Guide")," section of Helm official documentation. ")),(0,l.kt)("h3",{id:"41-creating-a-config-map-and-adding-it-as-a-template"},"4.1. Creating a Config Map and adding it as a template"),(0,l.kt)("p",null,"In the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/tree/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/templates"},"templates directory"),", create a file called ",(0,l.kt)("strong",{parentName:"p"},"my-config-map.yaml"),", and paste the below content inside the file."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: my-config-map\ndata:\n  exampleKey: "exampleValue"\n')),(0,l.kt)("p",null,"After doing so, run the following command from your root directory:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"helm template ./code/charts/sustainable-saas >> test.yaml\n")),(0,l.kt)("p",null,"You should now see a file called ",(0,l.kt)("strong",{parentName:"p"},"test.yaml")," in your root directory. Open the *",(0,l.kt)("em",{parentName:"p"},"test.yaml"),' file and search for "my-config-map".\nYou should see that your Config Map has been generated as a new Kyma/Kubernetes resource which can be deployed to your Cluster.'),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Hint")," - The command ",(0,l.kt)("em",{parentName:"p"},"helm template")," is extremely useful if you want to debug your Helm Chart and evaluate the generated outcome. ")),(0,l.kt)("h3",{id:"42-adding-a-simple-template-call"},"4.2. Adding a simple template call"),(0,l.kt)("p",null,"In the following, you learn how to add the release name as a prefix your Config Map object."),(0,l.kt)("p",null,"Modify your ",(0,l.kt)("em",{parentName:"p"},"my-config-map.yaml")," file created in the ",(0,l.kt)("a",{parentName:"p",href:"#41-creating-a-config-map-and-adding-it-as-a-template"},"previous step")," as shown below."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name:  {{ .Release.Name }}-my-config-map.yaml ## Modify this line accordingly\ndata:\n  exampleKey: "exampleValue"\n')),(0,l.kt)("p",null,"After the modification please run the command below."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"helm template myrelease ./code/chart > test.yaml\n")),(0,l.kt)("p",null,"Search once again for the term ",(0,l.kt)("strong",{parentName:"p"},"my-config-map")," in your ",(0,l.kt)("em",{parentName:"p"},"test.yaml")," file, you should see that your release name ",(0,l.kt)("strong",{parentName:"p"},"myrelease")," is now used as a prefix."),(0,l.kt)("p",null,"The respective resource definition should look like the following."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'---\n# Source: susaas-app/templates/my-config-map.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name:  myrelease-my-config-map.yaml \ndata:\n  exampleKey: "exampleValue"\n---\n')),(0,l.kt)("p",null,"As you can see, ",(0,l.kt)("em",{parentName:"p"},".Release.Name")," is a built-in object (similar to a variable) in Helm. It is set to the release name you provide to the ",(0,l.kt)("strong",{parentName:"p"},"helm template")," command. There are also other built-in objects set by Helm automatically. A list of those objects can be seen found in the ",(0,l.kt)("a",{parentName:"p",href:"https://helm.sh/docs/chart_template_guide/builtin_objects/"},"official documentation"),"."),(0,l.kt)("h3",{id:"43-using-values-from-the-valuesyaml-file"},"4.3. Using values from the ",(0,l.kt)("a",{parentName:"h3",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/blob/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/values.yaml"},"values.yaml")," file"),(0,l.kt)("p",null,"One of the Helm key concepts, is generating the Kubernetes/Kyma manifest files in a more dynamic way, using configuration details defined in the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/blob/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/values.yaml"},"values.yaml")," file.\nIn this section you will be adding a new configuration to the ",(0,l.kt)("em",{parentName:"p"},"values.yaml")," file and then reference it from within your template."),(0,l.kt)("p",null,"Open your ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/SAP-samples/btp-cap-multitenant-saas/blob/a54ac406193ab9f5fe066f1f0e205bb3df667632/deploy/kyma/charts/sustainable-saas/values.yaml"},"values.yaml")," and append the following configuration."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"...\nhtml5_apps_deployer:\n  cloudService: susaas.service\n  image:\n    repository: sapse/susaas-html5-deployer\n    tag: latest\n  bindings:\n    html5-apps-repo:\n      serviceInstanceName: html5-repo-host\n  resources:\n    limits:\n      cpu: 500m\n      memory: 500M\n    requests:\n      cpu: 300m\n      memory: 500M\n\n## Append below to the end of your values yaml\nmy_config_map:  \n    value: testvalue\n")),(0,l.kt)("p",null,"Switch to your ",(0,l.kt)("a",{parentName:"p",href:"../../../../code/charts/sustainable-saas/templates/my-config-map.yaml"},"my-config-map.yaml")," file and edit it as shown below:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name:  {{ .Release.Name }}-my-config-map.yaml \ndata:\n  exampleKey: {{ .Values.my_config_map.value }} ##\xa0Modify this line accordingly\n")),(0,l.kt)("p",null,"After editing, run the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"helm template ./code/charts/sustainable-saas > test.yaml\n")),(0,l.kt)("p",null,"Check the updated ",(0,l.kt)("em",{parentName:"p"},"test.yaml")," file in your root directory. Searching for your Config Map, should see the below output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"---\n# Source: susaas-app/templates/my-config-map.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name:  release-name-my-config-map.yaml \ndata:\n  exampleKey: testvalue\n---\n")),(0,l.kt)("h3",{id:"44-using-built-in-functions-of-helm-templates"},"4.4. Using built-in functions of Helm templates"),(0,l.kt)("p",null,"As explained, Helm's main purpose is all about creating manifest files for Kubernetes/Kyma which can be customized at Deployment time, making it easier to configure and install applications. "),(0,l.kt)("p",null,"For this purpose, ",(0,l.kt)("a",{parentName:"p",href:"https://helm.sh/docs/chart_template_guide/function_list/"},"built-in Helm template functions")," can be used for various operations on configuration values or to generate dynamic content."),(0,l.kt)("p",null,"In this section you will use a built-in template function provided by Helm, allowing you to apply dynamic changes to your Deployments."),(0,l.kt)("p",null,'Imagine you would like to "quote" the value you set in ',(0,l.kt)("a",{parentName:"p",href:"#43-using-values-from-valuesyaml-file"},"step 4.3"),'. To be able to "quote" a value, the built-in Helm ',(0,l.kt)("strong",{parentName:"p"},"quote")," function can be used in your ",(0,l.kt)("a",{parentName:"p",href:"../../../../code/charts/sustainable-saas/templates/my-config-map.yaml"},"my-config-map.yaml")," file."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: {{ .Release.Name }}-my-config-map.yaml \ndata:\n  exampleKey: {{ .Values.my_config_map.value | quote }} ##\xa0Modify this line accordingly\n")),(0,l.kt)("p",null,"Run the command below to see the effect of the function in action."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"helm template ./code/charts/sustainable-saas > test.yaml\n")),(0,l.kt)("p",null,"Searching once again in your ",(0,l.kt)("em",{parentName:"p"},"test.yaml")," file, you should find your updated Config Map resource definition as below. As expected, the ",(0,l.kt)("strong",{parentName:"p"},"exampleKey")," value is now quoted."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'---\n# Source: susaas-app/templates/my-config-map.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: release-name-my-config-map.yaml ##\xa0Modify this line accordingly\ndata:\n  exampleKey: "testvalue"\n---\n')),(0,l.kt)("h2",{id:"5-reusing-templates-via-named-templates"},"5. Reusing templates via named templates"),(0,l.kt)("p",null,"Before commencing this section let us briefly define the meaning of ",(0,l.kt)("em",{parentName:"p"},"named templates")," in Helm."),(0,l.kt)("p",null,"A named template (sometimes also referred to as partial template), is a reused template that can be accessed from other templates in the same chart. Named templates allow you to define a block of code that can be reused without duplicating it. Therefore, named templates are a very effective method to reuse code in Helm Charts, while keeping your templates DRY (Don't Repeat Yourself)."),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"Named templates"),' are usually stored in files starting with \\"',"_",'\\" for a simple reason. Filenames  prefixed with an underscore are considered void by Helm. These files are not converted into Kubernetes resource definitions, but are accessible for usage in other chart templates.'),(0,l.kt)("h3",{id:"defining-a-named-template"},"Defining a named template"),(0,l.kt)("p",null,"Assume you have a code block, which you would like to reuse in numerous other templates. A sample for such a named template could look as follows:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'{{- define "mysecret" -}}\napiVersion: v1\nkind: Secret\nmetadata:\n  name: {{ .Release.Name }}-secret\ntype: Opaque\ndata:\n  mykey: {{ .Values.secret.mykey | b64enc }}\n{{- end }}\n')),(0,l.kt)("p",null,"After defining the named template ",(0,l.kt)("strong",{parentName:"p"},"mysecret"),", you can simply refer to it in any of your templates:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'{{- include "mysecret.yaml" . -}}\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Hint"),' - The parameter \\".\\" passes the current Helm execution context into your include. This allows you to use other build-in objects (variables) like ',(0,l.kt)("em",{parentName:"p"},".Release.Name"),".")),(0,l.kt)("h3",{id:"reusing-existing-named-templates-from-helper-files"},"Reusing existing named templates from helper files"),(0,l.kt)("p",null,"With this theoretical background in mind, the following section explains you how to reuse an existing ",(0,l.kt)("em",{parentName:"p"},"named template")," defined in the ",(0,l.kt)("a",{parentName:"p",href:"../../../../code/charts/sustainable-saas/templates/_helpers.tpl"},"_helpers.tpl")," file."),(0,l.kt)("p",null,"Open the ",(0,l.kt)("a",{parentName:"p",href:"../../../../code/charts/sustainable-saas/templates/_helpers.tpl"},"_helpers.tpl"),' file and search for "cap.labels". You should see that a named template called "cap.labels" is defined as below.'),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Hint")," - Please note that named templates are usually defined in files starting with an underscore, since those files are not considered as Kubernetes or Kyma manifests by Helm.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'...\n{{/*\nLabels for a component\n*/}}\n{{- define "cap.labels" -}}\nhelm.sh/revision: {{ .Release.Revision | quote }}\nhelm.sh/chart: {{ printf "%s-%s" .Chart.Name .Chart.Version | replace "+" "_" | trunc 63 | trimSuffix "-" }}\napp.kubernetes.io/name: {{ .name }}\napp.kubernetes.io/managed-by: {{ .Release.Service }}\napp.kubernetes.io/instance: {{ .Release.Name }}\n{{- if .Chart.AppVersion }}\napp.kubernetes.io/version: {{ .Chart.AppVersion }}\n{{- end }}\n{{- end -}}\n...\n')),(0,l.kt)("p",null,"In your ",(0,l.kt)("em",{parentName:"p"},"my-config-map.yaml")," file, you can now reuse this ",(0,l.kt)("em",{parentName:"p"},"named template"),". Open your ",(0,l.kt)("a",{parentName:"p",href:"../../../../code/charts/sustainable-saas/templates/my-config-map.yaml"},"my-config-map.yaml")," file and edit it as shown below."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name:  {{ .Release.Name }}-my-config-map.yaml \n  labels: \n  {{- include "cap.labels" . | nindent 4 }} ## Add this line\ndata:\n  exampleKey: {{ .Values.my_config_map.value | quote }}\n')),(0,l.kt)("p",null,"Adding this line, will automatically add all labels to your Config Map including the required indentation. The Helm ",(0,l.kt)("em",{parentName:"p"},"nindent")," function takes care of the indentation."),(0,l.kt)("p",null,"Run the usual helm template command to see your changes in action."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"helm template ./code/charts/sustainable-saas > test.yaml\n")),(0,l.kt)("p",null,'Search for "my-config-map" in the updated ',(0,l.kt)("em",{parentName:"p"},"test.yaml")," file, and you will see that your Config Map resource is now generated as shown below."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'...\n---\n# Source: susaas-app/templates/my-config-map.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name:  release-name-my-config-map.yaml \n  labels:\n    helm.sh/revision: "1"\n    helm.sh/chart: susaas-app-0.0.1\n    app.kubernetes.io/name: \n    app.kubernetes.io/managed-by: Helm\n    app.kubernetes.io/instance: release-name\n    app.kubernetes.io/version: 0.0.1\ndata:\n  exampleKey: "testvalue"\n---\n...\n')),(0,l.kt)("p",null,'As you can see, you have reused the "cap.labels" named template to add predefined labels to your Config Map. This way, you can add the same labels to all of your Kubernetes/Kyma resources, simplifying the management of resources in your Cluster.'),(0,l.kt)("h2",{id:"6-relation-between-umbrella-charts-the-subcharts"},"6. Relation between Umbrella Charts the Subcharts"),(0,l.kt)("p",null,"Using an Umbrella Chart is an established way to group various charts connected to each other and manage them as a single entity."),(0,l.kt)("p",null,"With the help of Helm's ",(0,l.kt)("em",{parentName:"p"},"Subcharts")," feature, you can manage and organize complicated, multi-component applications, each requiring a separate set of Kubernetes resources. While things might sound complicated, it is actually quite simple to explain. A Helm Chart embedded into another Helm Chart as a dependency is known as Subchart."),(0,l.kt)("p",null,'According to the official Helm documentation: "',(0,l.kt)("em",{parentName:"p"},"The current best practice for composing a complex application from discrete parts is to create a top-level umbrella chart that exposes the global configurations, and then use the chart's subdirectory to embed each of the components."),'".'),(0,l.kt)("p",null,"Which is exactly the approach chosen in our sample application."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v2  \nname: susaas-app\ndescription: Sustainable SaaS\ntype: application\nversion: 0.0.1\nappVersion: 0.0.1\ndependencies:\n  - name: susaas-srv\n    alias: srv\n    version: 0.1.0\n  - name: susaas-router\n    alias: router\n    version: 0.1.0\n  - name: susaas-broker\n    alias: broker\n    version: 0.1.0\n  - name: susaas-api\n    alias: api\n    version: 0.1.0\n")),(0,l.kt)("p",null,"As you can see above, ",(0,l.kt)("strong",{parentName:"p"},"susaas-app")," is the Umbrella Chart and "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"susaas-srv"),(0,l.kt)("li",{parentName:"ul"},"susaas-router"),(0,l.kt)("li",{parentName:"ul"},"susaas-broker"),(0,l.kt)("li",{parentName:"ul"},"susaas-api")),(0,l.kt)("p",null,"are the Subcharts, all located in the ",(0,l.kt)("a",{parentName:"p",href:"../../../../code/charts/sustainable-saas/charts/"},"charts")," directory of the corresponding Umbrella Chart."),(0,l.kt)("p",null,"In short, ",(0,l.kt)("strong",{parentName:"p"},"susaas-app")," is - the one Helm Cart to rule them all - and the respective Subcharts are receiving their configurations from the ",(0,l.kt)("em",{parentName:"p"},"values.yaml")," file of the ",(0,l.kt)("strong",{parentName:"p"},"susaas-app")," chart."),(0,l.kt)("h2",{id:"7-further-readings"},"7. Further Readings"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://helm.sh/docs/"},"Helm official documentation")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.cncf.io/blog/2020/08/26/why-do-devops-engineers-love-helm/"},"Why do dev-ops engineers love Helm?")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://medium.com/tag/helm-chart"},"Relevant resources on medium"))))}c.isMDXComponent=!0},49766:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/HELM_Chart_Dir-3684c89efd75057abb1153c591ee3cb1.png"},97357:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/HELM_Chart_Temp_Dir-2826cb32b4e218fdd8fb698fe32f6238.png"}}]);